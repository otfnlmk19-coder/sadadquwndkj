<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Secure Vault</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
body {
    margin: 0;
    background: #0e0e0e;
    font-family: Arial, sans-serif;
    color: #eaeaea;
    text-align: center;
    padding-top: 70px;
}

.card {
    background: #151515;
    width: 94%;
    max-width: 520px;
    margin: auto;
    padding: 35px;
    border-radius: 16px;
    box-shadow: 0 0 25px rgba(0,0,0,0.85);
    border: 1px solid #2a2a2a;
}

.vault-icon { font-size: 48px; }

h1 { margin-bottom: 6px; }

/* üè¶ Security badge */
.security-badge {
    display: inline-block;
    margin-bottom: 6px;
    padding: 6px 12px;
    font-size: 11px;
    color: #8bd1ff;
    background: #10202b;
    border: 1px solid #1e3a4a;
    border-radius: 999px;
}

/* ‚è≥ Session timer */
.session-timer {
    font-size: 11px;
    color: #bbb;
    margin-bottom: 14px;
}

.progress {
    display: flex;
    justify-content: space-between;
    margin: 25px 0;
    font-size: 12px;
}

.step {
    flex: 1;
    position: relative;
    text-align: center;
    color: #888;
}

.step::before {
    content: "";
    position: absolute;
    top: 8px;
    left: -50%;
    width: 100%;
    height: 2px;
    background: #333;
}

.step:first-child::before { display: none; }

.step.active { color: #28a745; }
.step.active::before { background: #28a745; }

.success {
    color: #28a745;
    font-size: 22px;
    margin-top: 10px;
}

.section {
    background: #1b1b1b;
    border: 1px solid #2c2c2c;
    border-radius: 10px;
    padding: 18px;
    margin-top: 20px;
    text-align: left;
}

.section h3 {
    margin: 0 0 12px;
    font-size: 14px;
    color: #9fd3ff;
}

.row {
    display: flex;
    justify-content: space-between;
    align-items: center;
    font-size: 14px;
    margin: 6px 0;
    color: #ccc;
}

.row strong {
    color: #fff;
    letter-spacing: 1px;
}

/* üîê Reveal button */
.reveal-btn {
    background: none;
    border: none;
    cursor: pointer;
    margin-left: 10px;
    color: #aaa;
}
.reveal-btn:hover { color: #fff; }
.reveal-btn svg { width: 16px; height: 16px; }

.warning {
    margin-top: 22px;
    font-size: 12px;
    color: #d6c06a;
    background: #2a240f;
    padding: 12px;
    border-radius: 8px;
}

button.logout {
    margin-top: 30px;
    padding: 12px 28px;
    background: #dc3545;
    color: #fff;
    border: none;
    border-radius: 6px;
    cursor: pointer;
}

/* üîî Toast */
.toast {
    position: fixed;
    bottom: 55px;
    left: 50%;
    transform: translateX(-50%);
    background: #1f1f1f;
    color: #fff;
    padding: 12px 18px;
    border-radius: 8px;
    font-size: 13px;
    box-shadow: 0 0 15px rgba(0,0,0,0.6);
    opacity: 0;
    pointer-events: none;
    transition: opacity 0.3s, transform 0.3s;
}
.toast.show {
    opacity: 1;
    transform: translateX(-50%) translateY(-6px);
}

/* üåê IP info */
.ip-info {
    margin-top: 18px;
    font-size: 11px;
    color: #888;
    opacity: 0.85;
}
</style>
</head>

<body>

<div class="card">

    <div class="vault-icon">üè¶</div>
    <h1>Secure Vault</h1>
    <div class="security-badge">üîí Encrypted Vault ‚Ä¢ AES-256 ‚Ä¢ Secure Session</div>
    <div class="session-timer" id="sessionTimer">Session expires in 05:00</div>

    <div class="progress">
        <div class="step active">Login</div>
        <div class="step active">Verification</div>
        <div class="step active">Deposit</div>
        <div class="step active">Completed</div>
    </div>

    <div class="success">‚úÖ Deposit Successful</div>

    <div class="section">
        <h3>Transaction Details</h3>
        <div class="row"><span>Transaction ID</span><strong>TXN-9F38A2C1</strong></div>
        <div class="row"><span>Date & Time</span><strong>18 Jan 2026</strong></div>

        <div class="row">
            <span>Vault ID</span>
            <div style="display:flex;align-items:center;">
                <strong id="vaultId" data-full="SV-ABCD-8392">SV-****-8392</strong>
                <button class="reveal-btn" onclick="toggleVaultId()">
                    <svg id="eyeIcon" xmlns="http://www.w3.org/2000/svg" fill="none"
                         viewBox="0 0 24 24" stroke="currentColor">
                        <path stroke-width="2"
                              d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"/>
                        <path stroke-width="2"
                              d="M2.458 12C3.732 7.943 7.523 5 12 5
                                 c4.478 0 8.268 2.943 9.542 7
                                 -1.274 4.057-5.064 7-9.542 7
                                 -4.477 0-8.268-2.943-9.542-7z"/>
                    </svg>
                </button>
            </div>
        </div>

        <div class="row"><span>Status</span><strong>Completed</strong></div>
    </div>

    <div class="warning">
        üîê Do not share your vault or transaction details with anyone.
    </div>

    <button class="logout" onclick="logout()">Logout</button>

    <!-- üåê IP DISPLAY -->
    <div class="ip-info" id="ipInfo">üåê Detecting session IP‚Ä¶</div>

</div>

<div id="toast" class="toast"></div>

<script>
/* üîí Login check */
if (sessionStorage.getItem("loggedIn") !== "true") {
    window.location.href = "index.html";
}

/* ‚è≥ Session expiry */
const SESSION_DURATION = 5 * 60;
let expiry = sessionStorage.getItem("sessionExpiry");

if (!expiry) {
    expiry = Math.floor(Date.now() / 1000) + SESSION_DURATION;
    sessionStorage.setItem("sessionExpiry", expiry);
}

const timerEl = document.getElementById("sessionTimer");

setInterval(() => {
    const now = Math.floor(Date.now() / 1000);
    const remaining = expiry - now;

    if (remaining <= 0) {
        showToast("Session expired. Logging out‚Ä¶");
        sessionStorage.clear();
        setTimeout(() => location.href = "index.html", 2000);
        return;
    }

    const m = String(Math.floor(remaining / 60)).padStart(2, "0");
    const s = String(remaining % 60).padStart(2, "0");
    timerEl.textContent = `Session expires in ${m}:${s}`;
}, 1000);

/* üîî Toast */
function showToast(msg) {
    const t = document.getElementById("toast");
    t.textContent = msg;
    t.classList.add("show");
    setTimeout(() => t.classList.remove("show"), 3000);
}

/* üîê Vault reveal */
let hideTimer;

function toggleVaultId() {
    const v = document.getElementById("vaultId");
    const masked = "SV-****-8392";

    clearTimeout(hideTimer);

    if (v.textContent === masked) {
        v.textContent = v.dataset.full;
        showToast("Vault ID revealed for 5 seconds");
        hideTimer = setTimeout(() => v.textContent = masked, 5000);
    } else {
        v.textContent = masked;
    }
}

/* üåê Load IP */
async function loadIP() {
    try {
        const res = await fetch("https://ipapi.co/json/");
        const data = await res.json();
        const maskedIP = data.ip.replace(/\d+$/, "***");
        document.getElementById("ipInfo").textContent =
            `üåê Session IP: ${maskedIP} ‚Ä¢ ${data.country_code}`;
    } catch {
        document.getElementById("ipInfo").textContent =
            "üåê Session IP unavailable";
    }
}
loadIP();

function logout() {
    sessionStorage.clear();
    location.href = "index.html";
}
</script>

</body>
</html>
